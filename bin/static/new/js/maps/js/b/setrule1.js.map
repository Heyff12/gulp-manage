{"version":3,"sources":["b/setrule1.js"],"names":["time_area","startime","$","endtime","val","attr","s_year","s_month","s_day","e_year","e_month","e_day","s_time","e_time","e_time_s","s_time_s","s_cha","addClass","get_data","wordtip","length","text","startime_zu","split","data","nowYear","date_get","nowMonth","nowDate","endtime_zu","rules","JSON","parse","localstorage","getone_storage","eq","append","remove","find","css","i","chu_value","chu_key","song_value","index_value","index","dd_detail","get_shopname","return_data","shopname","zepto","require","yanzheng","add_bounced","ajax_rule","document","get_storage","on","showDom","querySelector","year","dataset","yearData","monthData","dateData","container","bankSelect","title","itemHeight","itemShowCount","relation","month","oneLevelId","threeLevelId","year_data","month_data","day_data","id","callback","dd_list","this","removeClass","parents","crash_now_str","crash_now_strend","replace","crash_end_z","crash_end_z_first","substr","crash_end_l","len_val","len","tel_activity","name_test","numprice_test","error_len","set_storage","chu_len","chu_html","chu_val","song_key","song_val","push","stringify","location","href","protocol","host"],"mappings":"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","file":"../../../b/setrule1.js","sourcesContent":["var zepto = require('../plug/zepto.min');\nvar yanzheng = require('../common/yanzheng');\nvar add_bounced = require('../common/add_bounced');\nvar ajax_rule = require('../common/ajax_rule');\nvar localstorage = require('../common/localstorage');\nvar iosselect = require('../common/iosselect');\nvar date_get = require('../common/date_get');\n//设置储值活动----------------------------------------------------------------------------------------------------------------------------------------------------\n$(document).ready(function() {\n    //获取店铺名称\n    var data_shopname = {};\n    //ajax_rule.ajax_rule(url, 'GET', 'json', data_shopname, '.zheceng', get_shopname);\n    //获取初始值\n    localstorage.get_storage(get_data);\n});\n//点击开始时间\n$('.js_startime').on('click', function() {\n    var showDom = document.querySelector('.js_startime');\n    var year = showDom.dataset['year'];\n    var month = showDom.dataset['month'];\n    var day = showDom.dataset['day'];\n\n    var bankSelect = new iosselect(3, [date_get.yearData, date_get.monthData, date_get.dateData], {\n        container: '.ios_select_container',\n        title: '选择开始时间',\n        itemHeight: 50,\n        itemShowCount: 3,\n        relation: [1, 1, 0, 0],\n        oneLevelId: year,\n        twoLevelId: month,\n        threeLevelId: day,\n        //showLoading: true,\n        callback: function(year_data, month_data, day_data) {\n            showDom.dataset['year'] = year_data.id;\n            showDom.dataset['month'] = month_data.id;\n            showDom.dataset['day'] = day_data.id;\n            showDom.value = month_data.id + '月' + day_data.id + '日';\n            $('#startime').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n            //设置结束时间的默认时间--开始时间\n            $('.js_endtime').attr('data-year', year_data.id);\n            $('.js_endtime').attr('data-month', month_data.id);\n            $('.js_endtime').attr('data-day', day_data.id);\n        }\n    });\n});\n//点击到期时间\n$('.js_endtime').on('click', function() {\n    var showDom = document.querySelector('.js_endtime');\n    var year = showDom.dataset['year'];\n    var month = showDom.dataset['month'];\n    var day = showDom.dataset['day'];\n\n    var bankSelect = new iosselect(3, [date_get.yearData, date_get.monthData, date_get.dateData], {\n        container: '.ios_select_container',\n        title: '选择结束时间',\n        itemHeight: 50,\n        itemShowCount: 3,\n        relation: [1, 1, 0, 0],\n        oneLevelId: year,\n        twoLevelId: month,\n        threeLevelId: day,\n        //showLoading: true,\n        callback: function(year_data, month_data, day_data) {\n            showDom.dataset['year'] = year_data.id;\n            showDom.dataset['month'] = month_data.id;\n            showDom.dataset['day'] = day_data.id;\n            showDom.value = month_data.id + '月' + day_data.id + '日';\n            $('#endtime').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n        }\n    });\n});\n//点击增加规则\n$('.js_add_activity').on('click', function() {\n    var dd_list = $('.js_rule dd').length - 0;\n    var dd_detail = '<dd data-index=\"\">储值<input class=\"text text_short js_chu js_storule\" type=\"text\" value=\"\" name=\"chu\" />元送<input class=\"text text_short js_song js_storule\" type=\"text\" value=\"\" name=\"song\" />元<i class=\"delete js_ruledelete\"></i></dd>';\n    if (dd_list <= 3) {\n        if (dd_list == 1) {\n            //第一条增加删除按钮\n            $('.js_rule dd').append('<i class=\"delete js_ruledelete\"></i>');\n        }\n        if (dd_list == 3) {\n            //设置为不可添加的按钮样式\n            $(this).find('.add_rule').css('display', 'none');\n            $(this).find('.add_rule_no').css('display', 'inline-block');\n        }\n        $('.js_rule').append(dd_detail);\n        $('.js_rule_error').removeClass('span_tips');\n    } else {\n        $('.js_rule_error').addClass('span_tips');\n    }\n});\n//点击删除规则\n$(document).on('click', '.js_ruledelete', function() {\n    var dd_list = $('.js_rule dd').length - 0;\n    if (dd_list == 2) {\n        //删除第一条数据后面的删除按钮\n        $(this).parents('dd').remove();\n        $('.js_rule dd i.js_ruledelete').remove();\n    }\n    $(this).parents('dd').remove();\n    $('.js_rule_error').removeClass('span_tips');\n    $('.js_add_activity').find('.add_rule').css('display', 'inline-block');\n    $('.js_add_activity').find('.add_rule_no').css('display', 'none');\n});\n//填写储值赠送金额\n$(document).on('input', '.js_storule', function() {\n    var crash_now_str = $(this).val();\n    //字符长的时候减小字号\n    if (crash_now_str.length <= 10) {\n        $(this).css('font-size', '16px');\n    } else {\n        $(this).css('font-size', '14px');\n    }\n    //将非数字的字符替换为空\n    var crash_now_strend = crash_now_str.replace(/[^\\d]/g, '');\n    //如果输入为空展示全部提现\n    if (crash_now_strend.length == 0) {\n        $(this).val('');\n        return false;\n    }\n    if (crash_now_strend.length == 1 && crash_now_strend == '0') {\n        $(this).val('');\n        return false;\n    }\n    //整数部分最长12位start\n    var crash_end_z = crash_now_strend.split('.')[0];\n    //如果整数部分首位为0，则截取后买的 \n    var crash_end_z_first = crash_end_z.substr(0, 1);\n    if (crash_end_z_first == '0') {\n        crash_end_z = crash_end_z.substr(1);\n    }\n    if (crash_end_z.length > 4) {\n        crash_end_z = crash_end_z.substr(0, 4);\n    }\n    if (crash_now_strend.split('.').length > 1) {\n        var crash_end_l = crash_now_strend.split('.')[1].substr(0, 2);\n        crash_now_strend = (crash_end_z - 0) + '.' + crash_end_l;\n    } else {\n        crash_now_strend = crash_end_z - 0;\n    }\n    //整数部分最长12位end\n    //控制输入长度后赋值并将该值转化为字符串格式\n    $(this).val(crash_now_strend);\n});\n//填写备注验证\n$('.js_note').on('input', function() {\n    var len_val = $(this).val();\n    var len = len_val.length - 0;\n    if (len <= 40) {\n        $('.js_wordtip').find('span').text(40 - len);\n    } else {\n        $('.js_note').val(len_val.substr(0, 40));\n    }\n});\n//点击提交预览\n$('.js_addactivity_sub').on('click', function() {\n    yanzheng.tel_activity('.js_tel');\n    yanzheng.name_test('.js_note', 0, 40);\n    time_area();\n    $('.js_storule').each(function() {\n        yanzheng.numprice_test(this, 0, 4);\n    });\n    var error_len = $('.error_tips').length;\n    if (error_len > 0) {\n        return false;\n    }\n    //存储数据并进入下一步\n    localstorage.set_storage();\n    //存储储值规则\n    var rules = [];\n    var chu_len = $('.js_rule dd').length;\n    for (var i = 0; i < chu_len; i++) {\n        var chu_html = $('.js_rule dd').eq(i);\n        var chu_key = chu_html.find('.js_chu').attr('name');\n        var chu_val = chu_html.find('.js_chu').val();\n        var song_key = chu_html.find('.js_song').attr('name');\n        var song_val = chu_html.find('.js_song').val();\n        var rule = { index: i + 1, chu_key: chu_val, song_key: song_val };\n        rules.push(rule);\n    }\n    localstorage.setone_storage('rules', JSON.stringify(rules));\n    location.href = location.protocol + '//' + location.host + '/Users/yaya/Documents/job/local/储值B端2/store/html/b/preview.html';\n});\n//开始时间与结束时间的判断\nfunction time_area() {\n    var startime = $('.js_startime');\n    var endtime = $('.js_endtime');\n    if (startime.val() && endtime.val()) {\n        var s_year = startime.attr('data-year');\n        var s_month = startime.attr('data-month');\n        var s_day = startime.attr('data-day');\n        var e_year = endtime.attr('data-year');\n        var e_month = endtime.attr('data-month');\n        var e_day = endtime.attr('data-day');\n        var s_time = s_year + '/' + s_month + '/' + s_day + ' 00:00:00';\n        var e_time = e_year + '/' + e_month + '/' + e_day + ' 23:59:59';\n        var s_time_s = new Date(s_time).getTime();\n        var e_time_s = new Date(e_time).getTime();\n        var s_cha = e_time_s - s_time_s;\n        if (e_time_s - s_time_s > 365 * 24 * 60 * 60 * 1000) {\n            $('.js_timetips').addClass('error_tips');\n        } else {\n            $('.js_timetips').removeClass('error_tips');\n        }\n    } else {\n        $('.js_timetips').addClass('error_tips');\n    }\n}\n//获取时间后设置日期显示\nfunction get_data() {\n    //剩余可输入字数\n    var wordtip = $('.js_note').val().length - 0;\n    $('.js_wordtip span').text(40 - wordtip);\n    //日期\n    var startime = $('#startime').val();\n    var startime_zu = startime.split('-');\n    if (startime) {\n        $('.js_startime').data('year', startime_zu[0]);\n        $('.js_startime').data('month', startime_zu[1]);\n        $('.js_startime').data('day', startime_zu[2]);\n        $('.js_startime').val(startime_zu[1] + '月' + startime_zu[2] + '日');\n    } else {\n        $('.js_startime').data('year', date_get.nowYear);\n        $('.js_startime').data('month', date_get.nowMonth);\n        $('.js_startime').data('day', date_get.nowDate);\n        $('#startime').val(date_get.nowYear + '-' + date_get.nowMonth + '-' + date_get.nowDate);\n        $('.js_startime').val('今天');\n    }\n    var endtime = $('#endtime').val();\n    var endtime_zu = endtime.split('-');\n    if (endtime) {\n        $('.js_endtime').data('year', endtime_zu[0]);\n        $('.js_endtime').data('month', endtime_zu[1]);\n        $('.js_endtime').data('day', endtime_zu[2]);\n        $('.js_endtime').val(endtime_zu[1] + '月' + endtime_zu[2] + '日');\n    } else {\n        $('.js_endtime').data('year', date_get.nowYear);\n        $('.js_endtime').data('month', date_get.nowMonth);\n        $('.js_endtime').data('day', date_get.nowDate);\n        $('#endtime').val(date_get.nowYear + '-' + date_get.nowMonth + '-' + date_get.nowDate);\n        $('.js_endtime').val('');\n    }\n    //储值规则--有退出，放置最后\n    var rules = JSON.parse(localstorage.getone_storage('rules'));\n    if (!rules) {\n        return false;\n    }\n    if (rules.length > 1) {\n        $('.js_rule dd').eq(0).append('<i class=\"delete js_ruledelete\"></i>');\n    } else {\n        $('.js_rule dd').eq(0).find('i.js_ruledelete').remove();\n    }\n    if (rules.length >= 4) {\n        $('.js_rule').find('.add_rule').css('display', 'none');\n        $('.js_rule').find('.add_rule_no').css('display', 'inline-block');\n    } else {\n        $('.js_rule').find('.add_rule').css('display', 'inline-block');\n        $('.js_rule').find('.add_rule_no').css('display', 'none');\n    }\n    for (var i = 0; i < rules.length; i++) {\n        var chu_value = rules[i].chu_key;\n        var song_value = rules[i].song_key;\n        var index_value = rules[i].index;\n        if (i == 0) {\n            $('.js_rule dd').eq(0).find('.js_chu').val(chu_value);\n            $('.js_rule dd').eq(0).find('.js_song').val(song_value);\n            $('.js_rule dd').eq(0).attr('data-index', index_value);\n        } else {\n            var dd_detail = '<dd data-index=\"' + index_value + '\">储值<input class=\"text text_short js_chu js_storule\" type=\"text\" value=\"' + chu_value + '\" name=\"chu\" />元送<input class=\"text text_short js_song js_storule\" type=\"text\" value=\"' + song_value + '\" name=\"song\" />元<i class=\"delete js_ruledelete\"></i></dd>';\n            $('.js_rule').append(dd_detail);\n        }\n    }\n}\n//获取店铺名称\nfunction get_shopname(return_data) {\n    $('.js_shopname').val(return_data.shopname);\n}\n//添加弹框\nadd_bounced.add_bounced();\n//关闭弹框\nadd_bounced.close_tip();\n"]}