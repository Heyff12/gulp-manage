{"version":3,"sources":["b/member_list.js"],"names":["memberto","obj","_hmt","push","c","location","protocol","host","$","attr","require","yanzheng","ajax_rule","scroll_more","add_load_img","el","demo","searchkey","data","members_all","members","members_count","members_pos","apiUrl","getdata","mounted","this","get_members","get_moredata","scroll_data","body_height","Math","floor","height","toFixed","updated","log","console","member_ser","methods","key","length","filter","member","name","indexOf","mobile","vm","get","show","then","response","hide","data_return","parse","JSON","slice","nomoredata_show","nomoredata_hide","window","setTimeout","nomor_show","respmsg","html","resperr","catch","scroll_if"],"mappings":"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","file":"../../../b/member_list.js","sourcesContent":["//点击会员列表\nfunction memberto(obj) {\n    _hmt.push(['_trackEvent', 'member', 'click', 'member_detail']);\n    var c = $(obj).attr('data-c');\n    var url_val = location.protocol + '//' + location.host + '/prepaid/v1/page/b/members/detail.html?c=' + c;\n    location.href = url_val;\n};\nrequire(['../require-config2'], function() {\n    require([\"zepto\", \"yanzheng\", \"ajax_rule\", \"scroll_more\"], function($, yanzheng, ajax_rule, scroll_more) {\n        $(function() {\n            //设置菜单空---取消了native的引用\n            // var menu_data = { menus: [] };\n            // native.setNavMenu(menu_data, function(cb) {\n            //     console.log(cb.ret);\n            // });\n            //添加图标和没有更多文字提示\n            scroll_more.add_load_img('.js_member_list');\n            //滚动加载-----会员信息----------------------------------------------------------\n            var demo = new Vue({\n                el: '.js_member_detail',\n                data: {\n                    searchkey: '',\n                    members_all: '',\n                    members: '',\n                    members_count: 10,\n                    members_pos: 10,\n                    apiUrl: location.protocol + '//' + location.host + '/prepaid/v1/api/b/members',\n                    getdata: {\n                        pos: 0,\n                        count: 10000,\n                    },\n                },\n                mounted: function() {\n                    this.get_members(); //获取网络全部数据数据\n                    scroll_more.scroll_more(this.get_moredata);\n                },\n                updated: function() {\n                    scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                    console.log('AJAX:body_height==' + scroll_more.scroll_data.body_height);\n                },\n                methods: {\n                    member_ser: function(members) {\n                        var key = this.searchkey;\n                        if (members.length <= 0) {\n                            return false;\n                        } else {\n                            return members.filter(function(member) {\n                                return member.name.indexOf(key) != '-1' || member.mobile.indexOf(key) != '-1';\n                            })\n                        }\n                    },\n                    get_members: function() {\n                        var vm = this;\n                        this.$http.get(this.apiUrl, {\n                                before: function() {\n                                    $('#load_small_bg').show();\n                                }\n                            })\n                            .then(function(response) {\n                                $('#load_small_bg').hide();\n                                var data_return = JSON.parse(response.data)\n                                if (data_return.respcd == '0000') {\n                                    vm.members_all = data_return.data;\n                                    //console.log(vm.members_all.length);\n                                    if (vm.members_all.length == 0) {\n                                        $('.js_li_none').show();\n                                        $('.js_member_detail').hide();\n                                        return false;\n                                    }\n                                    $('.js_li_none').hide();\n                                    $('.js_member_detail').show();\n                                    vm.members = vm.members_all.slice(0, vm.members_pos);\n                                    if (vm.members_all.length - vm.members_pos <= 0) {\n                                        scroll_more.nomoredata_show();\n                                        window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                                        scroll_more.scroll_data.nomor_show = false;\n                                        scroll_more.scroll_data.scroll_if = false;\n                                    } else {\n                                        vm.members_pos += vm.members_count;\n                                        scroll_more.scroll_data.scroll_if = true;\n                                    }\n                                    scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                                    $('.load').hide();\n                                    //console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                                    //console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                                } else {\n                                    $('#alert_alert').show();\n                                    $('.zheceng').show();\n                                    if (data_return.respmsg) {\n                                        $('#alert_alert .alert_con_br').html(data_return.respmsg);\n                                    } else {\n                                        $('#alert_alert .alert_con_br').html(data_return.resperr);\n                                    }\n                                }\n                            }, function(response) {\n                                $('#load_small_bg').hide();\n                                $('#alert_alert').show();\n                                $('.zheceng').show();\n                                $('#alert_alert .alert_con_br').html('网络超时!');\n                            })\n                            .catch(function(response) {\n                                $('#load_small_bg').hide();\n                                //console.log(response)\n                            });\n                    },\n                    get_moredata: function() {\n                        this.members = this.members_all.slice(0, this.members_pos);\n                        console.log(this.members.length);\n                        if (this.members_all.length - this.members_pos <= 0) {\n                            scroll_more.nomoredata_show();\n                            window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                            scroll_more.scroll_data.nomor_show = false;\n                            scroll_more.scroll_data.scroll_if = false;\n                        } else {\n                            this.members_pos += this.members_count;\n                            scroll_more.scroll_data.scroll_if = true;\n                        }\n                        $('.load').hide();\n                        console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                        console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                    },\n                }\n            })\n        })\n    })\n})\n"]}