{"version":3,"sources":["recharge/recharge_info.js"],"names":["timedCount","time0","text","$","setTimeout","t","clearTimeout","show","hide","require","yanzheng","add_bounced","ajax_rule","iosselect","date_day","if_code","code","data_code","captcha","val","get_code_succ","get_codeerror","parents","removeClass","addClass","get_code","return_data","get_shopname","shopname","get_tel","mobile","get_rechargesub","data_cz","c","get_hash","o","grid_index","recharge_su","window","location","href","url","error_yz","id","seccuss_yz","num_change_long","num","get","document","ready","attr","data_name","h","data_tel","on","tel_test_all","hasClass","mobile_val","data","html","showDom","querySelector","year","day","dataset","time_free","end_year","nowYear","start_year","yearData","monthData","dateData","bankSelect","container","title","itemHeight","itemShowCount","relation","month","oneLevelId","threeLevelId","year_data","month_data","day_data","callback","name","birth","tel","china_test_all","detail_test_all","split","bir","bir_y","bir_m","bir_d","code_test_all","bor_red_num","length","birthday","this","replace","crash_now_strend","substr"],"mappings":"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","file":"../../../recharge/recharge_info.js","sourcesContent":["require(['../require-config'], function() {\n    require([\"zepto\", \"yanzheng\", \"add_bounced\", \"ajax_rule\", \"iosselect\", \"date_day\"], function($, yanzheng, add_bounced, ajax_rule, iosselect, date_day) {\n        $(function() {\n            //填写信息----------------------------------------------------------------------------------------------------------------------------------------------------\n            $('.js_bindinfo').get(0) && (~ function() {\n                $(document).ready(function() {\n                    //设置默认生日\n                    $('#birthday').val('1980-1-1');\n                    $('.js_message_birth').attr('data-year','1980');\n                    $('.js_message_birth').attr('data-month','1');\n                    $('.js_message_birth').attr('data-day','1');\n                    //获取店铺名称--需要增加\n                    var data_name = {\n                        'h': yanzheng.get_hash('h'),\n                    };\n                    ajax_rule.ajax_rule('/prepaid/v1/api/c/merchant_info', 'GET', 'json', data_name, '.zheceng', get_shopname);                \n                });\n            }());            \n            //信息确认----------------------------------------------------------------------------------------------------------------------------------------------------\n            $('.js_bindinfo_confirm').get(0) && (~ function() {\n                $(document).ready(function() {\n                    //获取店铺名称--需要增加\n                    var data_name = {\n                        'h': yanzheng.get_hash('h'),\n                    };\n                    ajax_rule.ajax_rule('/prepaid/v1/api/c/merchant_info', 'GET', 'json', data_name, '.zheceng', get_shopname);                \n                    //获取储值账户\n                    var data_tel = {\n                        'c': yanzheng.get_hash('c'),\n                    };\n                    ajax_rule.ajax_rule('/prepaid/v1/api/c/bindinfo', 'GET', 'json', data_tel, '.zheceng1', get_tel);  \n                });\n                $('.js_alert_message2').on('click',function(){\n                    get_rechargesub();\n                });\n            }());\n\n            //获取验证码\n            $('.js_get_entycode').on('click', function() {\n                //验证\n                yanzheng.tel_test_all('.js_message_tel', error_yz, seccuss_yz);\n                if ($('.js_message_tel').parents('dl').hasClass('error_data')) {\n                    return false;\n                } else {\n                    //获取值\n                    var mobile_val = $('.js_message_tel').val();\n                    var url = '/prepaid/v1/api/c/captcha';\n                    var data = {\n                        'c': yanzheng.get_hash('c'),\n                        'mobile': mobile_val,\n                    };\n                    //获取验证码--todo--show\n                    ajax_rule.ajax_rule(url, 'GET', 'json', data, '.zheceng', get_code);\n                    //get_code(); //测试倒计时\n                }\n            });\n            //倒计时不可点击\n            $('.js_show_entycode').on('click', function() {\n                $('.alert_con').show();\n                $('.alert_con .alert_con_br').html(\"一分钟后再次获取！\");\n                $('.zheceng').show();\n            });\n            //点击生日\n            $('.js_message_birth').on('click', function() {\n                var showDom = document.querySelector('.js_message_birth');\n                var year = showDom.dataset['year'];\n                var month = showDom.dataset['month'];\n                var day = showDom.dataset['day'];\n                //设置开始和结束的年份\n                date_day.time_free.start_year=1947;\n                date_day.time_free.end_year=date_day.nowYear;\n                var bankSelect = new iosselect(3, [date_day.yearData, date_day.monthData, date_day.dateData], {\n                    container: '.ios_select_container',\n                    title: '选择生日日期',\n                    itemHeight: 50,\n                    itemShowCount: 3,\n                    relation: [1, 1, 0, 0],\n                    oneLevelId: year,\n                    twoLevelId: month,\n                    threeLevelId: day,\n                    //showLoading: true,\n                    callback: function(year_data, month_data, day_data) {\n                        showDom.dataset['year'] = year_data.id;\n                        showDom.dataset['month'] = month_data.id;\n                        showDom.dataset['day'] = day_data.id;\n                        showDom.value = year_data.id + '年' + month_data.id + '月' + day_data.id + '日';\n                        $('#birthday').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n                    }\n                });\n            });\n            //点击填写信息确定按钮\n            $('.js_alert_message').on('click', function() {\n                //验证输入\n                var name = $('.js_message_name').val();\n                var birth = $('.js_message_birth').val();\n                var tel = $('.js_message_tel').val();\n                var code = $('.js_code').val();\n                yanzheng.tel_test_all('.js_message_tel', error_yz, seccuss_yz);\n                yanzheng.china_test_all('.js_message_name', 0, 4, error_yz, seccuss_yz);\n                yanzheng.detail_test_all('.js_message_birth', -1, 20, error_yz, seccuss_yz);\n                if (birth) {\n                    var bir = $('#birthday').val().split('-');\n                    var bir_y = bir[0];\n                    var bir_m = num_change_long(bir[1]);\n                    var bir_d = num_change_long(bir[2]);\n                    birth = bir_y + '-' + bir_m + '-' + bir_d;\n                    $('#birthday').val(bir_y + '-' + bir_m + '-' + bir_d);\n                }\n                //校验验证码\n                yanzheng.code_test_all('.js_code', error_yz, seccuss_yz);\n                var bor_red_num = $('.error_data').length;\n                if (bor_red_num > 0) {\n                    return false;\n                }\n                // //获取验证码--todo--show---取消\n                // var data_code = {\n                //     'captcha': code,\n                //     'mobile': tel,\n                // };\n                // ajax_rule.ajax_rule('/prepaid/v1/api/c/captcha', 'POST', 'json', data_code, '.zheceng', get_code_succ,get_codeerror); \n                var data_cz = {\n                    'c': yanzheng.get_hash('c'),\n                    'grid_index': yanzheng.get_hash('grid_index'),\n                    'name': name,\n                    'mobile': tel,\n                    'birthday': birth,\n                    'captcha':code,\n                };\n                ajax_rule.ajax_rule('/prepaid/v1/api/c/bindinfo', 'POST', 'json', data_cz, '.zheceng1', get_rechargesub);               \n            });\n            //校验验证码\n            $('.js_code').on('input',function(){\n                //验证必须填写了手机号\n                var tel = $('.js_message_tel').val();\n                yanzheng.tel_test_all('.js_message_tel', error_yz, seccuss_yz);\n                if ($('.js_message_tel').parents('dl').hasClass('error_data')) {\n                    $(this).val('');\n                    return false;\n                }\n                //验证验证码\n                var code=$(this).val();\n                //将非数字的字符替换为空\n                var crash_now_strend = code.replace(/[^\\d]/g, '');\n                //如果输入长度为6\n                if (crash_now_strend.length <6) {\n                    $(this).val(crash_now_strend);\n                    return false;                \n                }\n                $(this).val(crash_now_strend.substr(0,6));                \n                if_code($(this).val());\n            });\n            //输入过程中校验验证码\n            function if_code(code) {\n                //获取验证码--todo--show---取消\n                var data_code = {\n                    'captcha': code,\n                    'mobile': $('.js_message_tel').val(),\n                };\n                ajax_rule.ajax_rule('/prepaid/v1/api/c/captcha', 'POST', 'json', data_code, '.zheceng', get_code_succ,get_codeerror); \n            }\n            //验证码验证正确\n            function get_code_succ() {\n                $('.js_code').parents('dl').removeClass('error_data');\n                $('.js_alert_message_disa').hide();\n                $('.js_alert_message').show();\n            }\n            //验证码验证错误\n            function get_codeerror(){\n                $('.js_code').parents('dl').addClass('error_data');\n                $('.js_alert_message_disa').show();\n                $('.js_alert_message').hide();\n            }\n            //获取验证码-时候等待\n            function get_code(return_data) {\n                $('.js_get_entycode').hide();\n                $('.js_show_entycode').show();\n                timedCount();\n            }\n            //获取店铺名称\n            function get_shopname(return_data) {\n                $('.js_shopname').text(return_data.shopname);\n            }\n            //获取储值账号\n            function get_tel(return_data) {\n                $('.js_message_tel').val(return_data.mobile);\n            }\n            //验证码验证正确--取消\n            function get_code_succ_lost() {\n                $('.js_code').parents('dl').removeClass('error_data');                \n                //提交充值  \n                var name = $('.js_message_name').val();\n                var birth = $('#birthday').val();\n                var tel = $('.js_message_tel').val();\n                var code = $('.js_code').val(); \n                var data_cz = {\n                    'c': yanzheng.get_hash('c'),\n                    'grid_index': yanzheng.get_hash('grid_index'),\n                    'name': name,\n                    'mobile': tel,\n                    'birthday': birth,\n                    'captcha':code,\n                };\n                ajax_rule.ajax_rule('/prepaid/v1/api/c/bindinfo', 'POST', 'json', data_cz, '.zheceng1', get_rechargesub);\n            }\n            //点击购买\n            function get_rechargesub() {\n                var data_cz = {\n                    'c': yanzheng.get_hash('c'),\n                    'h': yanzheng.get_hash('h'),\n                    'o': yanzheng.get_hash('o'),\n                    'grid_index': yanzheng.get_hash('grid_index'),\n                };\n                ajax_rule.ajax_rule('/prepaid/v1/api/c/recharge', 'POST', 'json', data_cz, '.zheceng2',recharge_su);\n            }\n            //验证码输入错误\n            function recharge_su(return_data) {\n                window.location.href = return_data.url;\n            }\n            //验证错误\n            function error_yz(id) {\n                $(id).parents('dl').addClass('error_data');\n            }\n            //验证错误\n            function error_yz(id) {\n                $(id).parents('dl').addClass('error_data');\n            }\n            //验证正确\n            function seccuss_yz(id) {\n                $(id).parents('dl').removeClass('error_data');\n            }\n            //提起补全\n            function num_change_long(num) {\n                if (num < 10) {\n                    return '0' + num;\n                } else {\n                    return num;\n                }\n            }\n            //添加弹框\n            add_bounced.add_bounced();\n            //关闭弹框\n            add_bounced.close_tip();\n\n        })\n    });\n});\n//倒计时60s\nfunction timedCount() {\n    var time0 = $('.js_show_entycode i').text();\n    $('.js_show_entycode i').text(time0 - 1);\n    t = setTimeout(\"timedCount()\", 1000);\n    if (time0 == 0) {\n        clearTimeout(t);\n        $('.js_get_entycode').show();\n        $('.js_show_entycode i').text(61);\n        $('.js_show_entycode').hide();\n    }\n}\n"]}